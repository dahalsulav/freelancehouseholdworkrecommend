{% extends 'users/base.html' %} {% block content %}
<h1>Request Task</h1>
<form method="POST">
  {% csrf_token %}
  <div class="form-group">
    <label for="{{ form.title.id_for_label }}">Title</label>
    {{ form.title }}
  </div>
  <div class="form-group">
    <label for="{{ form.description.id_for_label }}">Description</label>
    {{ form.description }}
  </div>
  <div class="form-group">
    <label for="{{ form.location.id_for_label }}">Location</label>
    {{ form.location }}
  </div>
  <div class="form-group">
    <label for="{{ form.start_time.id_for_label }}">Start Time</label>
    <div
      class="input-group date"
      id="datetimepicker1"
      data-target-input="nearest"
    >
      <input
        type="datetime-local"
        class="form-control datetimepicker-input"
        name="start_time"
      />
    </div>
  </div>
  <div class="form-group">
    <label for="{{ form.end_time.id_for_label }}">End Time</label>
    <div class="input-group date" data-target-input="nearest">
      <input
        type="datetime-local"
        class="form-control datetimepicker-input"
        name="end_time"
      />
    </div>
  </div>
  <button type="submit" class="btn btn-primary">Request Task</button>
</form>

<script>
  $(document).ready(function () {
    const startTime = $("input[name='start_time']");
    const endTime = $("input[name='end_time']");

    function CheckDateTime() {
      const start = new Date(startTime.val());
      const end = new Date(endTime.val());
      const hours = (end - start) / (1000 * 60 * 60);
      const now = new Date();

      if (start < now) {
        alert("Start time should be greater than the current time.");
        startTime.val("");
        return;
      }

      if (end <= start) {
        alert("End time should be greater than the start time.");
        endTime.val("");
        return;
      }
    }
    startTime.on("change", CheckDateTime);
    endTime.on("change", CheckDateTime);
  });
</script>
{% endblock %}
